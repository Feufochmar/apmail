<!DOCTYPE html>
<html>
  <head>
    <title>AP.Mail</title>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <link href="apmail.css" rel="stylesheet" type="text/css" media="all" />
    <script src="render.js"></script>
  </head>
  <body onload="UI.checkConnection()">
    <nav id="tab-bar">
      <!-- Send page tab -->
      <input type="radio" id="send-selector" class="page" name="page" value="send" checked onchange="UI.setContext('send-message')" />
      <label for="send-selector" class="page-label" id="send-selector-label">Send Message</label>
      <!-- Inbox tab -->
      <input type="radio" id="inbox-selector" class="page" name="page" value="inbox" onchange="UI.setContext('my-inbox')" />
      <label for="inbox-selector" class="page-label" id="inbox-selector-label">My Inbox</label>
      <!-- Outbox tab -->
      <input type="radio" id="outbox-selector" class="page" name="page" value="outbox" onchange="UI.setContext('my-outbox')" />
      <label for="outbox-selector" class="page-label" id="outbox-selector-label">My Outbox</label>
      <!-- Profile -->
      <input type="radio" id="profile-selector" class="page" name="page" value="profile" onchange="UI.setContext('my-profile')" />
      <label for="profile-selector" class="page-label" id="profile-selector-label">My Profile</label>
      <!-- Lookup user box -->
      <nav class="page-label">
        <label for="lookup-actor" id="lookup-actor-label">Lookup Actor</label>
        <input id="lookup-actor" type="text" placeholder="name@server"/>
        <button onclick="UI.lookupActor()">Search</button>
      </nav>
    </nav>
    <!-- Timelines -->
    <section id="timeline" style="display:none;">
      <section id="timeline-error" class="error"></section>
      <section id="timeline-data" class="timeline"></section>
    </section>
    <!-- Content pages -->
    <section id="main-content">
      <section id="content-error" class="error"></section>
      <!-- Account selection page -->
      <main id="select-user" style="display:none;">
        <h2>Connection</h2>
        Indicate the account to connect to. <br/>
        <input id="connect-username" type="text" placeholder="name@server" pattern=".*@.*" required /><br/>
        <button onclick="UI.selectUser()">Next</button>
      </main>
      <!-- Password page -->
      <main id="ask-password" style="display:none;">
        <h2>Password</h2>
        <section id="ask-password-user-info">
          <section class="actor-display">
            <span id="ask-password-user-icon"/></span>
            <p style="display:inline-block;">
              <strong><span id="ask-password-user-display-name"></span></strong><br/>
              <a id="ask-password-user-address"></a>
            </p>
          </section>
        </section>
        Enter the password for this account. <br/>
        <input id="connect-password" type="password" placeholder="password" /><br/>
        <button onclick="UI.showPage('select-user', undefined)">Back</button>
        <button onclick="UI.connectUser()">Connect</button>
      </main>
      <!-- Profile page -->
      <main id="show-profile" style="display:none;">
        <section>
          <span id="profile-icon"></span>
          <p style="display:inline-block;">
            <span id="profile-display-name"></span><br/>
            <a id="profile-address"></a>
          </p>
        </section>
        <section>
          <p id="profile-summary">
          </p>
        </section>
        <section>
          <details>
            <summary>Show source</summary>
            <textarea rows="30" cols="120" readonly id="profile-code-source">
            </textarea>
          </details>
        </section>
      </main>
      <!-- Show Message page -->
      <main id="show-message" style="display:none;">
        <section id="message-info"></section>
      </main>
      <!-- Send message page -->
      <main id="send-message" style="display:none;">
        <h4>Audience</h4>
        <label for="send-message-public-visibility">General visibility</label>
        <select id="send-message-public-visibility" onchange="UI.updateSendVisibility()">
          <option value="to">Public (to), displayed in local/global timelines</option>
          <option value="cc">Public (cc), hidden from local/global timelines</option>
          <option value="non">Not public</option>
        </select><br/>
        <label for="send-message-follower-visibility">Follower's visibility</label>
        <select id="send-message-follower-visibility" onchange="UI.updateSendVisibility()">
          <option value="to">Public (to)</option>
          <option value="cc">Public (cc)</option>
          <option value="non">Not sent to followers</option>
        </select><br/>
        <label for="send-message-to-recipient">To</label>
        <ul id="send-message-to" class="recipient-list"></ul>
        <input id="send-message-to-recipient" type="text" placeholder="user@instance" size="40" />
        <button onclick="UI.addToRecipient()">Add</button><br/>
        <label for="send-message-cc-recipient">Cc</label>
        <ul id="send-message-cc" class="recipient-list"></ul>
        <input id="send-message-cc-recipient" type="text" placeholder="user@instance" size="40" />
        <button onclick="UI.addCcRecipient()">Add</button><br/>
        <section id="send-message-recipient-error"></section>
        <h4>Message</h4>
        <input id="send-message-subject" type="text" onchange="UI.updateSendContent()" size="80" placeholder="Subject (optional)"/> <br/>
        <textarea id="send-message-content" rows="20" cols="80" placeholder="What do you want to say ?" onchange="UI.updateSendContent()"></textarea> <br/>
        <button onclick="UI.sendMessage()">Send</button>
      </main>
    </section>
  </body>
</html>
